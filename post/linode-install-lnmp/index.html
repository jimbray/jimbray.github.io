<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="一键安装有什么好学习的"><meta name=generator content="Hugo 0.81.0"><title>Linode 安装 lnmp 学习 &#183; 我说的这句话是谎话</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://jimbray.xyz/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://jimbray.xyz/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://jimbray.xyz/css/blackburn.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css?family=Raleway" rel=stylesheet type=text/css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad()</script><link rel="shortcut icon" href=https://jimbray.xyz/img/favicon.ico type=image/x-icon><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8790496632299830",enable_page_level_ads:!0})</script><meta name=google-site-verification content="lsfTBJKzPUfwHdKB84_xsa5u_38z1iLbcGOAkxOo03Q"></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=https://jimbray.xyz/>Jimbray</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/post/><i class="fa fa-archive fa-fw"></i>Archive</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/tags/><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/note/note><i class="fa fa-sticky-note fa-fw"></i>Notes</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://twitter.com/jimbray16 target=_blank><i class="fa fa-twitter-square fa-fw"></i>Twitter</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://github.com/jimbray target=_blank><i class="fa fa-github-square fa-fw"></i>GitHub</a></li></ul></div><div><div class=small-print><small>&copy; 2016. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>Linode 安装 lnmp 学习</h1><h2>一键安装有什么好学习的</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i><time>09 Jun 2016, 17:30</time></div><div><i class="fa fa-tags fa-fw"></i><a class=post-taxonomy-tag href=https://jimbray.xyz/tags/vps>VPS</a>&nbsp;/
<a class=post-taxonomy-tag href=https://jimbray.xyz/tags/linux>Linux</a></div></div><h3 id=安装>安装</h3><p>1.安装 LNMP 参见 <a href=http://lnmp.org/install.html>lnmp官网</a></p><p>2.安装完成之后 查看 nginx 、 php、mysql 的运行状态</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
ps aux | grep nginx

ps aux | grep php

ps aux | gerp mysql

</code></pre></div><p>确保已经在运行状态</p><p>3.查看 nginx 的配置文件 （nginx.conf）路径可以</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
whereis nginx

</code></pre></div><h3 id=配置>配置</h3><p>命令查看</p><p>配置文件内 user：www-data</p><p>www-data 可任意修改</p><p>4.修改 php 的配置文件 （php/etc/php-fpm.conf）</p><p>修改</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
listen.owner <span style=color:#f92672>=</span> www-data
listen.group <span style=color:#f92672>=</span> www-data
</code></pre></div><p>www-data 修改为 第3步 nginx 设置的对应的User名称</p><ol start=5><li>下载 wordpress程序 <a href=https://wordpress.org/download/>官方下载</a></li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
wget http://wordpress.org/latest.tar.gz

tar -xzvf latest.tar.gz

</code></pre></div><p>将解压出来的 wordpress文件夹 复制到 自定义文件夹，我的放在了/var/www/wordpress</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp -r wordpress /var/www/wordpress 
</code></pre></div><p>6.先不管wordpress 了，现在需要把wordpress交到nginx手上管理</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vi /nginx.conf
</code></pre></div><p>有一行：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>include /etc/nginx/conf.d/*.conf;
</code></pre></div><p>意思是 配置文件会调用 /etc/nginx/conf.d/ 目录下的所有 conf 文件</p><p>不需要修改 nginx.conf 文件（防止改错）</p><p>在/etc/nginx/conf.d/目录下新建一个文件并编辑</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
touch myconf.conf

vi myconf.conf

</code></pre></div><p>输入内容</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
server <span style=color:#f92672>{</span>
    listen 80;
    root /var/www/wordpress;
    index index.php index.html index.htm;
    server_name jimbray.xyz;
    location / <span style=color:#f92672>{</span>
        try_files $uri $uri/ /index.php?q<span style=color:#f92672>=</span>$uri&amp;amp;$args;
    <span style=color:#f92672>}</span>
    error_page <span style=color:#ae81ff>404</span> /404.html;
    error_page <span style=color:#ae81ff>500</span> <span style=color:#ae81ff>502</span> <span style=color:#ae81ff>503</span> <span style=color:#ae81ff>504</span> /50x.html;

    <span style=color:#75715e># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    location ~ <span style=color:#ae81ff>\.</span>php$ <span style=color:#f92672>{</span>
        fastcgi_pass unix:/tmp/php-cgi.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_buffer_size 1024k;
        fastcgi_buffers <span style=color:#ae81ff>6</span> 256k;
        fastcgi_busy_buffers_size 1024k;
        include /etc/nginx/fastcgi_params;
        try_files $uri <span style=color:#f92672>=</span>404;
    <span style=color:#f92672>}</span>
<span style=color:#f92672>}</span>

</code></pre></div><p>7.重启 nginx 和 php</p><p>访问域名或ip应该可以看到 worpress的安装页面了</p><p>8.先不要安装，mysql还没有创建数据库</p><p>参见 <a href=https://www.atlantic.net/community/howto/installing-wordpress-on-a-debian-8/>MySql 部分</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>&amp;lt;div class<span style=color:#f92672>=</span>&amp;quot;EnlighterJSWrapper classicEnlighterJSWrapper&amp;quot;&amp;gt;

mysql -u root -p

create database wordpress character set utf8 collate utf8_bin;

grant all privileges on wordpress.* to wordpressuser@localhost identified by <span style=color:#e6db74>&#39;[insert-password-here]&#39;</span>;
flush privileges;
exit

</code></pre></div><p>Mysql 的默认账户和密码都是 root</p><p>如果输入不正确：参见 <a href=http://lnmp.org/faq.html>如果忘记MySQL root密码，如何重设密码？</a></p><p>9.刷新界面，安装wordpress</p><p>没有什么意外的话应该可以安装成功了</p><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=https://jimbray.xyz/post/ssh-root-login-setting/><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=https://jimbray.xyz/post/ssh-root-login-setting/>VPS 禁止远程ROOT登录</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=https://jimbray.xyz/post/try-docker/>试玩 Docker</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=https://jimbray.xyz/post/try-docker/><i class="fa fa-chevron-right"></i></a></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){var a,b;if(window.location.hostname=="localhost")return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='jimbray-github-io',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script src=https://jimbray.xyz/js/ui.js></script><script>(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'),ga('create','UA-78813427-1','auto'),ga('send','pageview')</script></body></html>