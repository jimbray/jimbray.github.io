<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content=这样就不需要在两个地方备份了><meta name=generator content="Hugo 0.55.6"><title>在同一个repo备份hexo文章以及配置 &middot; 我说的这句话是谎话</title><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css><!--[if lte IE 8]><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css><!--<![endif]--><!--[if lte IE 8]><link rel=stylesheet href=https://jimbray.xyz/css/side-menu-old-ie.css><![endif]--><!--[if gt IE 8]><!--><link rel=stylesheet href=https://jimbray.xyz/css/side-menu.css><!--<![endif]--><link rel=stylesheet href=https://jimbray.xyz/css/blackburn.css><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css><link href="https://fonts.googleapis.com/css?family=Raleway" rel=stylesheet type=text/css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/androidstudio.min.css><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script>hljs.initHighlightingOnLoad();</script><link rel="shortcut icon" href=https://jimbray.xyz/img/favicon.ico type=image/x-icon><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-8790496632299830",enable_page_level_ads:true});</script><meta name=google-site-verification content=lsfTBJKzPUfwHdKB84_xsa5u_38z1iLbcGOAkxOo03Q></head><body><div id=layout><a href=#menu id=menuLink class=menu-link><span></span></a><div id=menu><a class="pure-menu-heading brand" href=https://jimbray.xyz/>Jimbray</a><div class=pure-menu><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/><i class="fa fa-home fa-fw"></i>Home</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/post/><i class="fa fa-archive fa-fw"></i>Archive</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/tags/><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://jimbray.xyz/note/note><i class="fa fa-sticky-note fa-fw"></i>Notes</a></li></ul></div><div class="pure-menu social"><ul class=pure-menu-list><li class=pure-menu-item><a class=pure-menu-link href=https://twitter.com/jimbray16 target=_blank><i class="fa fa-twitter-square fa-fw"></i>Twitter</a></li><li class=pure-menu-item><a class=pure-menu-link href=https://github.com/jimbray target=_blank><i class="fa fa-github-square fa-fw"></i>GitHub</a></li></ul></div><div><div class=small-print><small>&copy; 2016. All rights reserved.</small></div><div class=small-print><small>Built with&nbsp;<a href=https://gohugo.io/ target=_blank>Hugo</a></small>
<small>Theme&nbsp;<a href=https://github.com/yoshiharuyamashita/blackburn target=_blank>Blackburn</a></small></div></div></div><div id=main><div class=header><h1>在同一个repo备份hexo文章以及配置</h1><h2>这样就不需要在两个地方备份了</h2></div><div class=content><div class=post-meta><div><i class="fa fa-calendar fa-fw"></i><time>04 Jun 2016, 16:48</time></div><div><i class="fa fa-tags fa-fw"></i><a class=post-taxonomy-tag href=https://jimbray.xyz/tags/hexo>Hexo</a></div></div><h3 id=使用场景>使用场景</h3><p>使用 Hexo 的一键发布文章很方便，但是有多个地点需要同步文章的时候就麻烦了。
因为GitHub 的 repo 上 只有Hexo 编译好的 html文件，
并没有Hexo 的source 文件（也就是文章）。
如果需要在不同地点进行 文章发布的话，就没有办法完成了（先不考虑草稿的事）
所以 我们需要在其他 repo 进行文章的备份。</p><h3 id=使用工具>使用工具</h3><p>还是使用Git 进行操作
Git 需要一个服务器
现在支持 git 托管的服务已经很多了，用其他的也可以。
不过我不想注册使用那么多，还是使用Github 吧
而且还是同一个 repo</p><h3 id=操作步骤>操作步骤</h3><h4 id=上传操作>上传操作</h4><p>进入 Hexo 所在的文件夹
打开 git bash 窗口</p><pre><code class=language-bash>git init
</code></pre><p>进行初始化repo</p><p>完成之后，添加 修改的文件，本来 Hexo 就自带了 .gitignore 文件
需要忽略的文件 都已经默认配置好了
接下来进行第一次 提交。
当然了，git流程还是要走正确的
首先应该是 add</p><pre><code class=language-bash>git add .
</code></pre><p>我们将所有文件进行添加 . 就是这个意思
然后commit</p><pre><code class=language-bash>git commit -m &quot;commit first time&quot;
</code></pre><p>提交成功之后
接下来就是 push 到github了
我们先把本地这个文件夹 映射到 远程 repo 上</p><pre><code class=language-bash>  git remote add origin https://github.com/your-name/your-name.github.io.git
</code></pre><p>接下来就是把刚刚的提交 push 上去
关键点到了
Hexo 部署的 page 是在 master 上的
如果我们push 到 master 分支上的话
虽然程序还能运行
但是 目录结构就会变得很乱了</p><p>我们的做法是：把 这些源文件（包括文章和配置）
push到另外一个 分支中
怎么操作呢</p><p>1.先新建一个分支 名字叫 source</p><pre><code class=language-bash>  git branch source
</code></pre><p>然后把刚刚的东西全部 push 到 source 分支上</p><pre><code class=language-bash>  git push -u origin source
</code></pre><p>输入账号密码后上传
一会就成功了</p><p>然后去 GitHub 上的 repo 看一下
有两个分支
一个是 master,里面的内容是 Hexo 生成了 page 页面
一个是 source, 里面的内容是 我们的文章还有 Hexo 的源文件</p><p>这样的话，不管在什么地方 都可以进行最新文章的获取和继续操作了</p><p>当然了，修改了文章或者其他东西，在 deploy 前 还是 先 commit 和push 一下哦
记得：所有的本地操作 都在 source 分支里面。</p><h4 id=下载操作>下载操作</h4><p>现在我们切换视觉到 一台新的电脑上，
在这台电脑上没有 Node.js,没有 Hexo，没有 Git</p><p>1.先安装必要的程序 node.js 和 git，过程不再赘述</p><p>2.把 原来的文章下载下来</p><p>3.配置 git ssh key，你才拥有从这台电脑发布文章的权利（请不要在公共电脑操作）</p><p>4.然后就是走 Hexo 的发布流程，也就是上面的 上传操作了</p><p>具体操作如下</p><h5 id=把文章下载下来>把文章下载下来</h5><p>找到自己喜欢的 路径，新建一个文件夹，命名随意，自己认识就好
打开 git bash</p><pre><code class=language-bash>git clone xxxxxxxxx.xx (输入你的 github page 的 repo 地址)
</code></pre><p>等待下载完成之后，默认的分支是 master，还记得吗？
master分支是 Hexo 编译之后的 网站程序，我们的文章在 source 分支内</p><pre><code class=language-bash>git checkout source
</code></pre><p>这个时候文件夹内的 内容已经是 我们的文章了</p><h5 id=配置-git-ssh-key>配置 git ssh key</h5><p>还是在当前的 git bash 界面</p><p>打开 ssh-key 所在文件夹</p><pre><code class=language-bash>cd ~/.ssh
</code></pre><p>生成 ssh-key</p><pre><code class=language-bash>ssh-keygen -t rsa -C &quot;your_email@youremail.com&quot;
</code></pre><p>弹出一下提问
我们不修改生成路径，不设置密码短语，直接回车<br>生成成功之后，找到 刚刚升车 ssh-key 的路径
找到 id_rsa.pub 文件
右键-使用文本编辑器打开，里面有一大串的英文字母，不需要管，从头开始复制，直到最后
注意：最后的空格不需要 复制到（可能会引起一些问题）</p><p>然后就是去 github setting 里面 设置 ssh-key 了
具体参照 <a href=https://gist.github.com/yisibl/8019693>如何创建公钥</a></p><p>配置完成之后，测试一下</p><pre><code class=language-bash>ssh -T git@github.com
</code></pre><p>如果返回 Hello <username>(username 表示你的用户名)
表示成功</p><h5 id=然后就是配置-hexo-程序了>然后就是配置 Hexo 程序了</h5><p>安装 hexo</p><pre><code class=language-bash>npm install hexo-cli -g

npm install hexo --save
</code></pre><p>检查 hexo 是否安装成功</p><pre><code class=language-bash>hexo -v
</code></pre><p>这个时候就不做 初始化了
这个时候就不做 初始化了
这个时候就不做 初始化了</p><p>自动安装需要的组件</p><pre><code class=language-bash>npm install
</code></pre><p>安装 git 部署的 插件</p><pre><code class=language-bash>npm install hexo-deployer-git --save
</code></pre><p>操作完成
现在这台新电脑 就跟原来那台电脑一样操作就可以发布文章了。</p><div class="prev-next-post pure-g"><div class=pure-u-1-24 style=text-align:left><a href=https://jimbray.xyz/post/hello-world/><i class="fa fa-chevron-left"></i></a></div><div class=pure-u-10-24><nav class=prev><a href=https://jimbray.xyz/post/hello-world/>Hello World</a></nav></div><div class=pure-u-2-24>&nbsp;</div><div class=pure-u-10-24><nav class=next><a href=https://jimbray.xyz/post/ss-thunder/>使用迅雷下载后 shadowsocks失效 解决办法</a></nav></div><div class=pure-u-1-24 style=text-align:right><a href=https://jimbray.xyz/post/ss-thunder/><i class="fa fa-chevron-right"></i></a></div></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='jimbray-github-io';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></div><script src=https://jimbray.xyz/js/ui.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-78813427-1','auto');ga('send','pageview');</script></body></html>